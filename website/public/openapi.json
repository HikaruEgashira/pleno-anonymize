{"openapi":"3.1.0","info":{"title":"pleno-anonymize","description":"\nPII (Personal Information) anonymization server with Japanese support.\n\n## Features\n- **Text PII Detection** - Detect personal information in text using Presidio + spaCy-LLM\n- **Text PII Redaction** - Anonymize personal information by replacing with placeholders\n- **Image PII Redaction** - Redact PII from images using OCR\n- **API Proxies** - Transparent proxies to OpenAI, Anthropic, and Gemini APIs with automatic PII redaction\n\n## Supported Entity Types\n- `PERSON` - Person names\n- `EMAIL_ADDRESS` - Email addresses\n- `PHONE_NUMBER` - Phone numbers\n\n## API Proxy Endpoints\nAll proxy endpoints automatically redact PII before sending to the upstream API,\nand restore original values in the response.\n\n| Endpoint | Upstream API |\n|----------|-------------|\n| `/api/openai/{path}` | OpenAI (Chat Completions & Responses API) |\n| `/api/anthropic/{path}` | Anthropic Messages API |\n| `/api/gemini/{path}` | Google Gemini API |\n","contact":{"name":"pleno-anonymize","url":"https://github.com/HikaruEgashira/pleno-anonymize"},"version":"1.0.0"},"paths":{"/api/analyze":{"post":{"tags":["PII Detection"],"summary":"Analyze","description":"Detect PII entities in text.\n\nAnalyzes the input text and returns a list of detected PII entities\nwith their positions and confidence scores.\n\n**Example Request:**\n```json\n{\n  \"text\": \"My name is John Doe and my email is john@example.com\",\n  \"language\": \"en\"\n}\n```\n\n**Example Response:**\n```json\n[\n  {\"entity_type\": \"PERSON\", \"start\": 11, \"end\": 19, \"score\": 0.85, \"text\": \"John Doe\"},\n  {\"entity_type\": \"EMAIL_ADDRESS\", \"start\": 38, \"end\": 54, \"score\": 1.0, \"text\": \"john@example.com\"}\n]\n```","operationId":"analyze_api_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalyzeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/redact":{"post":{"tags":["PII Redaction"],"summary":"Redact","description":"Redact (anonymize) PII in text and/or images.\n\nReplaces detected PII with placeholders like `<PERSON>`, `<EMAIL_ADDRESS>`.\nSupports both text and image redaction.\n\n**Text Redaction Example:**\n```json\n{\n  \"text\": \"Contact John at john@example.com\"\n}\n```\nResponse:\n```json\n{\n  \"text\": \"Contact <PERSON> at <EMAIL_ADDRESS>\",\n  \"items\": [\"replace\", \"replace\"]\n}\n```\n\n**Image Redaction:**\nSend a base64-encoded image or data URL in the `image` field.\nThe response will contain a redacted image with PII blacked out.","operationId":"redact_api_redact_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RedactRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/openai/{path}":{"get":{"tags":["OpenAI Proxy"],"summary":"Openai Proxy","description":"Proxy to OpenAI API with automatic PII redaction.\n\nSupports both Chat Completions API (`/v1/chat/completions`) and\nResponses API (`/v1/responses`).\n\n**How it works:**\n1. Detects and redacts PII in your request (text and images)\n2. Forwards the sanitized request to OpenAI\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/openai/v1/chat/completions\" \\\n  -H \"Authorization: Bearer $OPENAI_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"model\": \"gpt-5.2\", \"messages\": [{\"role\": \"user\", \"content\": \"Hello\"}]}'\n```","operationId":"openai_proxy_api_openai__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["OpenAI Proxy"],"summary":"Openai Proxy","description":"Proxy to OpenAI API with automatic PII redaction.\n\nSupports both Chat Completions API (`/v1/chat/completions`) and\nResponses API (`/v1/responses`).\n\n**How it works:**\n1. Detects and redacts PII in your request (text and images)\n2. Forwards the sanitized request to OpenAI\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/openai/v1/chat/completions\" \\\n  -H \"Authorization: Bearer $OPENAI_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"model\": \"gpt-5.2\", \"messages\": [{\"role\": \"user\", \"content\": \"Hello\"}]}'\n```","operationId":"openai_proxy_api_openai__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["OpenAI Proxy"],"summary":"Openai Proxy","description":"Proxy to OpenAI API with automatic PII redaction.\n\nSupports both Chat Completions API (`/v1/chat/completions`) and\nResponses API (`/v1/responses`).\n\n**How it works:**\n1. Detects and redacts PII in your request (text and images)\n2. Forwards the sanitized request to OpenAI\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/openai/v1/chat/completions\" \\\n  -H \"Authorization: Bearer $OPENAI_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"model\": \"gpt-5.2\", \"messages\": [{\"role\": \"user\", \"content\": \"Hello\"}]}'\n```","operationId":"openai_proxy_api_openai__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["OpenAI Proxy"],"summary":"Openai Proxy","description":"Proxy to OpenAI API with automatic PII redaction.\n\nSupports both Chat Completions API (`/v1/chat/completions`) and\nResponses API (`/v1/responses`).\n\n**How it works:**\n1. Detects and redacts PII in your request (text and images)\n2. Forwards the sanitized request to OpenAI\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/openai/v1/chat/completions\" \\\n  -H \"Authorization: Bearer $OPENAI_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"model\": \"gpt-5.2\", \"messages\": [{\"role\": \"user\", \"content\": \"Hello\"}]}'\n```","operationId":"openai_proxy_api_openai__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["OpenAI Proxy"],"summary":"Openai Proxy","description":"Proxy to OpenAI API with automatic PII redaction.\n\nSupports both Chat Completions API (`/v1/chat/completions`) and\nResponses API (`/v1/responses`).\n\n**How it works:**\n1. Detects and redacts PII in your request (text and images)\n2. Forwards the sanitized request to OpenAI\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/openai/v1/chat/completions\" \\\n  -H \"Authorization: Bearer $OPENAI_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"model\": \"gpt-5.2\", \"messages\": [{\"role\": \"user\", \"content\": \"Hello\"}]}'\n```","operationId":"openai_proxy_api_openai__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/anthropic/{path}":{"get":{"tags":["Anthropic Proxy"],"summary":"Anthropic Proxy","description":"Proxy to Anthropic Messages API with automatic PII redaction.\n\n**How it works:**\n1. Detects and redacts PII in messages and system prompts\n2. Forwards the sanitized request to Anthropic\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/anthropic/v1/messages\" \\\n  -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n  -H \"anthropic-version: 2023-06-01\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"model\": \"claude-opus-4-5\", \"max_tokens\": 100, \"messages\": [...]}'\n```","operationId":"anthropic_proxy_api_anthropic__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Anthropic Proxy"],"summary":"Anthropic Proxy","description":"Proxy to Anthropic Messages API with automatic PII redaction.\n\n**How it works:**\n1. Detects and redacts PII in messages and system prompts\n2. Forwards the sanitized request to Anthropic\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/anthropic/v1/messages\" \\\n  -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n  -H \"anthropic-version: 2023-06-01\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"model\": \"claude-opus-4-5\", \"max_tokens\": 100, \"messages\": [...]}'\n```","operationId":"anthropic_proxy_api_anthropic__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Anthropic Proxy"],"summary":"Anthropic Proxy","description":"Proxy to Anthropic Messages API with automatic PII redaction.\n\n**How it works:**\n1. Detects and redacts PII in messages and system prompts\n2. Forwards the sanitized request to Anthropic\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/anthropic/v1/messages\" \\\n  -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n  -H \"anthropic-version: 2023-06-01\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"model\": \"claude-opus-4-5\", \"max_tokens\": 100, \"messages\": [...]}'\n```","operationId":"anthropic_proxy_api_anthropic__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Anthropic Proxy"],"summary":"Anthropic Proxy","description":"Proxy to Anthropic Messages API with automatic PII redaction.\n\n**How it works:**\n1. Detects and redacts PII in messages and system prompts\n2. Forwards the sanitized request to Anthropic\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/anthropic/v1/messages\" \\\n  -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n  -H \"anthropic-version: 2023-06-01\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"model\": \"claude-opus-4-5\", \"max_tokens\": 100, \"messages\": [...]}'\n```","operationId":"anthropic_proxy_api_anthropic__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Anthropic Proxy"],"summary":"Anthropic Proxy","description":"Proxy to Anthropic Messages API with automatic PII redaction.\n\n**How it works:**\n1. Detects and redacts PII in messages and system prompts\n2. Forwards the sanitized request to Anthropic\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/anthropic/v1/messages\" \\\n  -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n  -H \"anthropic-version: 2023-06-01\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"model\": \"claude-opus-4-5\", \"max_tokens\": 100, \"messages\": [...]}'\n```","operationId":"anthropic_proxy_api_anthropic__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/gemini/{path}":{"get":{"tags":["Gemini Proxy"],"summary":"Gemini Proxy","description":"Proxy to Google Gemini API with automatic PII redaction.\n\n**How it works:**\n1. Detects and redacts PII in contents and system instructions\n2. Forwards the sanitized request to Gemini\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/gemini/v1beta/models/gemini-3-pro:generateContent?key=$GEMINI_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"contents\": [{\"parts\": [{\"text\": \"Hello\"}]}]}'\n```","operationId":"gemini_proxy_api_gemini__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Gemini Proxy"],"summary":"Gemini Proxy","description":"Proxy to Google Gemini API with automatic PII redaction.\n\n**How it works:**\n1. Detects and redacts PII in contents and system instructions\n2. Forwards the sanitized request to Gemini\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/gemini/v1beta/models/gemini-3-pro:generateContent?key=$GEMINI_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"contents\": [{\"parts\": [{\"text\": \"Hello\"}]}]}'\n```","operationId":"gemini_proxy_api_gemini__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Gemini Proxy"],"summary":"Gemini Proxy","description":"Proxy to Google Gemini API with automatic PII redaction.\n\n**How it works:**\n1. Detects and redacts PII in contents and system instructions\n2. Forwards the sanitized request to Gemini\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/gemini/v1beta/models/gemini-3-pro:generateContent?key=$GEMINI_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"contents\": [{\"parts\": [{\"text\": \"Hello\"}]}]}'\n```","operationId":"gemini_proxy_api_gemini__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Gemini Proxy"],"summary":"Gemini Proxy","description":"Proxy to Google Gemini API with automatic PII redaction.\n\n**How it works:**\n1. Detects and redacts PII in contents and system instructions\n2. Forwards the sanitized request to Gemini\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/gemini/v1beta/models/gemini-3-pro:generateContent?key=$GEMINI_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"contents\": [{\"parts\": [{\"text\": \"Hello\"}]}]}'\n```","operationId":"gemini_proxy_api_gemini__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Gemini Proxy"],"summary":"Gemini Proxy","description":"Proxy to Google Gemini API with automatic PII redaction.\n\n**How it works:**\n1. Detects and redacts PII in contents and system instructions\n2. Forwards the sanitized request to Gemini\n3. Restores original PII values in the response\n\n**Usage:**\n```bash\ncurl -X POST \"https://anonymize.plenoai.com/api/gemini/v1beta/models/gemini-3-pro:generateContent?key=$GEMINI_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"contents\": [{\"parts\": [{\"text\": \"Hello\"}]}]}'\n```","operationId":"gemini_proxy_api_gemini__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AnalyzeRequest":{"properties":{"text":{"type":"string","title":"Text"},"language":{"type":"string","title":"Language","default":"en"},"entities":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Entities"}},"type":"object","required":["text"],"title":"AnalyzeRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"RedactRequest":{"properties":{"text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text"},"image":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image"},"language":{"type":"string","title":"Language","default":"en"},"entities":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Entities"},"operators":{"anyOf":[{"additionalProperties":{"additionalProperties":true,"type":"object"},"type":"object"},{"type":"null"}],"title":"Operators"},"fill_color":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Fill Color","default":[0,0,0]}},"type":"object","title":"RedactRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}